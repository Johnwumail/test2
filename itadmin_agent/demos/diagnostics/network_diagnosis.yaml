# Demo: Network Diagnostics
# This configuration runs comprehensive network diagnostics to identify connectivity issues

# Target server information
hostname: "app01.example.com"  # Replace with your actual server hostname
username: "admin"              # SSH username for connection
port: 22                       # SSH port (default: 22)

# Basic network tests
basic_tests:
  # Check if the host is up
  ping_test: true
  ping_count: 4
  ping_timeout: 2  # seconds
  
  # Check DNS resolution
  dns_test: true
  dns_servers:
    - "8.8.8.8"      # Google DNS
    - "1.1.1.1"      # Cloudflare DNS
    - "208.67.222.222" # OpenDNS
  
  # Network interface status
  interface_check: true

# Route tracing
traceroute:
  enabled: true
  max_hops: 30
  timeout: 2  # seconds
  targets:
    - "google.com"
    - "github.com"
    - "aws.amazon.com"

# Port scanning
port_scan:
  enabled: true
  scan_type: "basic"  # Options: basic, full
  timeout: 2  # seconds per port
  
  # Common service ports to check
  common_ports:
    - 22    # SSH
    - 80    # HTTP
    - 443   # HTTPS
    - 3306  # MySQL
    - 5432  # PostgreSQL
    - 6379  # Redis
    - 27017 # MongoDB
  
  # External services to check connectivity to
  external_services:
    - host: "api.github.com"
      port: 443
      description: "GitHub API"
    - host: "registry.npmjs.org"
      port: 443
      description: "NPM Registry"
    - host: "pypi.org"
      port: 443
      description: "Python Package Index"

# HTTP tests
http_tests:
  enabled: true
  timeout: 5  # seconds
  endpoints:
    - url: "https://httpbin.org/status/200"
      expected_status: 200
      description: "HTTP Success Test"
    - url: "https://httpbin.org/status/404"
      expected_status: 404
      description: "HTTP Not Found Test"
    - url: "https://httpbin.org/delay/1"
      timeout: 2
      description: "HTTP Timeout Test"

# Network bandwidth test
bandwidth_test:
  enabled: true
  duration: 10  # seconds
  direction: "both"  # Options: download, upload, both
  server: "speedtest.net"

# Log gathering
logs:
  gather_logs: true
  log_files:
    - "/var/log/syslog"
    - "/var/log/dmesg"
    - "/var/log/kern.log"
  max_lines: 1000  # per file
  
  # Run network-related commands and capture output
  commands:
    - "ip addr show"
    - "ip route show"
    - "netstat -tuln"
    - "ss -tuln"
    - "iptables -L -n"

# Report settings
report:
  format: "html"  # Options: text, html, json
  include_recommendations: true
  severity_thresholds:
    latency_warning_ms: 100
    packet_loss_warning_percent: 5
    bandwidth_warning_mbps: 10 